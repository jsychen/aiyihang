{"version":3,"sources":["webpack:///37.build.js","webpack:///src/pages/login/index.vue","webpack:///./src/pages/login/index.vue?ab6a","webpack:///./src/pages/login/index.vue?08ef","webpack:///./src/pages/login/index.vue?50f0","webpack:///./src/pages/login/index.vue"],"names":["webpackJsonp","156","module","__webpack_exports__","__webpack_require__","__WEBPACK_IMPORTED_MODULE_0_mint_ui__","n","data","tip","yanzhengcode","code","sessionId","openId","onoff","phone","newusername","isWeixin","methods","login","this","Object","open","that","$ajax","get","params","smsCode","then","res","console","log","close","msg","refreshToken","catch","err","_refreshToken","_this","localStorage","setItem","JSON","stringify","$router","push","name","is_weixin","navigator","userAgent","toLowerCase","match","getsessionId","text","spinnerType","method","url","codeClick","reg","test","$qs","i","timer","setInterval","clearInterval","getopenid","created","RegExp","r","window","location","search","substr","mounted","278","exports","content","locals","279","280","render","_vm","_h","$createElement","_c","_self","staticClass","_v","attrs","label","type","placeholder","model","value","callback","$$v","expression","on","click","_s","staticRenderFns","esExports","93","injectStyle","ssrContext","defineProperty","__WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_index_vue__","__WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_231fa990_hasScoped_true_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_index_vue__","normalizeComponent","__vue_styles__","Component"],"mappings":"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","file":"37.build.js?c903e8d21b2bad90a6ae","sourcesContent":["webpackJsonp([37],{\n\n/***/ 156:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mint_ui__ = __webpack_require__(3);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_mint_ui___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_mint_ui__);\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\n\n/* harmony default export */ __webpack_exports__[\"a\"] = ({\n  data: function data() {\n    return {\n      tip: '获取验证码',\n      yanzhengcode: '',\n      code: '',\n      sessionId: '',\n      openId: '',\n      onoff: false,\n      phone: '',\n      newusername: '',\n      isWeixin: false\n    };\n  },\n\n  methods: {\n    login: function login() {\n      if (!this.phone) {\n        Object(__WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Toast\"])('手机号码不能为空');\n        return;\n      }\n      if (!this.code) {\n        Object(__WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Toast\"])('验证码不能为空');\n        return;\n      }\n      __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].open('登录中...');\n      var that = this;\n      this.$ajax.get('member/login', {\n        params: { openId: that.sessionId, phone: that.phone, smsCode: that.code }\n      }).then(function (res) {\n        console.log(res);\n        var data = res.data;\n        switch (data.code) {\n          case '2001':\n            __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].close();\n            Object(__WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Toast\"])(data.msg);\n            break;\n          case '0000':\n            __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].close();\n            that.refreshToken(that.phone, data.data.refreshToken, that.sessionId);\n            break;\n        }\n      }).catch(function (err) {});;\n      //this.$router.push({ name: 'myindex'}) // -> /user\n    },\n    refreshToken: function refreshToken(phone, _refreshToken, sessionId) {\n      var _this = this;\n\n      this.$ajax.get('member/refreshToken', {\n        params: { openId: sessionId, phone: phone, refreshToken: _refreshToken }\n      }).then(function (res) {\n\n        var data = res.data;\n        localStorage.setItem('openid', data.data.openId);\n        localStorage.setItem('user', JSON.stringify(data.data));\n        _this.$router.push({ name: 'myindex' }); // -> /user\n        // switch(data.code){\n        //     case '2001':\n        //     Toast(data.msg);\n        //     break;\n        //     case '0000':\n        //     Indicator.close();\n        //     that.refreshToken(that.phone,data.data.refreshToken,that.sessionId);\n        //     localStorage.setItem('openid',that.sessionId)\n        //     that.$router.push({ name: 'myindex'}) // -> /user\n        //     break;\n        // }\n      }).catch(function (err) {});\n    },\n\n    // 判断是否为微信环境\n    is_weixin: function is_weixin() {\n      var ua = navigator.userAgent.toLowerCase();\n      if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\n        this.isWeixin = true;\n      } else {\n        // 微信外\n        this.isWeixin = false;\n      }\n    },\n\n    //获取sessionId\n    getsessionId: function getsessionId() {\n      var that = this;\n      __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].open({\n        text: '登录初始化...',\n        spinnerType: 'fading-circle'\n      });\n      this.$ajax({\n        method: 'get',\n        url: '/member/getSessionId'\n      }).then(function (res) {\n        console.log(res, 'sessionId');\n        that.sessionId = res.data.data;\n        // 获取的sessionid\n        // localStorage.setItem('sessionId',res.data.data)\n        // localStorage.setItem('openid',res.data.data)\n        __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].close();\n      }).catch(function (err) {\n        __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].close();\n      });\n    },\n    codeClick: function codeClick() {\n      var reg = /^1[3|4|5|7|8][0-9]{9}$/; //验证规则\n\n      if (!this.phone) {\n        Object(__WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Toast\"])('手机号码不能为空');\n        return;\n      }\n      if (!reg.test(this.phone)) {\n        Object(__WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Toast\"])('手机号码格式错误');\n        return;\n      }\n      if (this.onoff) {\n        return;\n      }\n      this.onoff = true;\n      var that = this;\n      this.$ajax({\n        method: 'post',\n        url: 'captcha/sendSms',\n        data: this.$qs.stringify({ openId: that.sessionId, phone: that.phone })\n      }).then(function (res) {\n\n        console.log(res, '获取验证码');\n        var i = 60;\n        var timer = setInterval(function () {\n          if (i == 1) {\n            that.tip = \"获取验证码\";\n            that.onoff = false;\n            clearInterval(timer);\n            return;\n          }\n          that.tip = --i + '秒后重新获取';\n        }, 1000);\n      });\n    },\n\n    // 获取微信的openid\n    getopenid: function getopenid() {\n      var that = this;\n      __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].open({\n        text: '登录初始化...',\n        spinnerType: 'fading-circle'\n      });\n      this.$ajax({\n        method: 'post',\n        url: 'wx/getOpenId',\n        data: this.$qs.stringify({ code: that.yanzhengcode })\n      }).then(function (res) {\n        // that.openId = res.data.data\n        localStorage.setItem('wxopenid', res.data.data);\n        __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].close();\n      }).catch(function (err) {\n        __WEBPACK_IMPORTED_MODULE_0_mint_ui__[\"Indicator\"].close();\n      });\n    }\n  },\n  created: function created() {\n    this.getsessionId();\n    var ua = navigator.userAgent.toLowerCase();\n    if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\n      this.isWeixin = true;\n      var reg = new RegExp(\"(^|&)\" + 'code' + \"=([^&]*)(&|$)\");\n      var r = window.location.search.substr(1).match(reg);\n      this.yanzhengcode = r[2];\n      this.getopenid();\n    } else {\n      // 微信外\n      this.isWeixin = false;\n    }\n  },\n  mounted: function mounted() {}\n});\n\n/***/ }),\n\n/***/ 278:\n/***/ (function(module, exports, __webpack_require__) {\n\n// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = __webpack_require__(279);\nif(typeof content === 'string') content = [[module.i, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = __webpack_require__(2)(\"16715086\", content, true, {});\n\n/***/ }),\n\n/***/ 279:\n/***/ (function(module, exports, __webpack_require__) {\n\nexports = module.exports = __webpack_require__(1)(false);\n// imports\n\n\n// module\nexports.push([module.i, \".wrap[data-v-231fa990]{height:100%;background:#f5f5f5}.bottom-btn[data-v-231fa990]{width:9.28rem;background:-moz-linear-gradient(top,#ff8586,#d81618);background:-webkit-linear-gradient(top,#ff8586,#d81618);background:-o-linear-gradient(top,#ff8586,#d81618);background:linear-gradient(top,#ff8586,#d81618);font-size:.4rem;color:#fff;height:1.06667rem;border-radius:.21333rem;margin:.8rem auto 0}.bottom-btn[data-v-231fa990],.phone[data-v-231fa990]{display:flex;justify-content:center;align-items:center}.phone[data-v-231fa990]{height:2.08rem;font-size:.45333rem}.btn-code[data-v-231fa990]{color:#7a7979}footer[data-v-231fa990]{margin-top:.8rem;width:100%;height:.4rem;font-size:.34667rem;text-align:center;font-weight:500;color:#6d6d6d}\", \"\"]);\n\n// exports\n\n\n/***/ }),\n\n/***/ 280:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nvar render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"phone\"},[_vm._v(\"手机号登录\")]),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"手机号\",\"type\":\"tel\",\"placeholder\":\"请输入新的手机号\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('mt-field',{staticClass:\"getcode\",attrs:{\"label\":\"验证码\",\"type\":\"number\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}},[_c('span',{staticClass:\"btn-code\",on:{\"click\":_vm.codeClick}},[_vm._v(_vm._s(_vm.tip))])]),_vm._v(\" \"),_c('div',{staticClass:\"bottom-btn\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\n/* harmony default export */ __webpack_exports__[\"a\"] = (esExports);\n\n/***/ }),\n\n/***/ 93:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_index_vue__ = __webpack_require__(156);\n/* empty harmony namespace reexport */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_231fa990_hasScoped_true_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_index_vue__ = __webpack_require__(280);\nfunction injectStyle (ssrContext) {\n  __webpack_require__(278)\n}\nvar normalizeComponent = __webpack_require__(4)\n/* script */\n\n\n/* template */\n\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-231fa990\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __WEBPACK_IMPORTED_MODULE_0__babel_loader_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_script_index_0_index_vue__[\"a\" /* default */],\n  __WEBPACK_IMPORTED_MODULE_1__node_modules_vue_loader_13_7_3_vue_loader_lib_template_compiler_index_id_data_v_231fa990_hasScoped_true_buble_transforms_node_modules_vue_loader_13_7_3_vue_loader_lib_selector_type_template_index_0_index_vue__[\"a\" /* default */],\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Component.exports);\n\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// 37.build.js?c903e8d21b2bad90a6ae","<template>\r\n  <div class=\"wrap\">\r\n    <div class=\"phone\">手机号登录</div>\r\n    <mt-field label=\"手机号\" type=\"tel\" placeholder=\"请输入新的手机号\" v-model=\"phone\"></mt-field>\r\n    <mt-field label=\"验证码\" type=\"number\" v-model=\"code\" placeholder=\"请输入验证码\" class=\"getcode\">\r\n      <span class=\"btn-code\" @click=\"codeClick\">{{tip}}</span>\r\n    </mt-field>\r\n    <div class=\"bottom-btn\" @click=\"login\">登录</div>\r\n    <!-- <footer>爱义行，让洗车变得简单快乐</footer> -->\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Toast } from 'mint-ui';\r\nimport { Indicator } from 'mint-ui';\r\nexport default {\r\n  data() {\r\n    return {\r\n      tip: '获取验证码',\r\n      yanzhengcode: '',\r\n      code: '',\r\n      sessionId: '',\r\n      openId: '',\r\n      onoff: false,\r\n      phone: '',\r\n      newusername: '',\r\n      isWeixin: false\r\n    }\r\n  },\r\n  methods: {\r\n    login() {\r\n      if (!this.phone) {\r\n        Toast('手机号码不能为空');\r\n        return;\r\n      }\r\n      if (!this.code) {\r\n        Toast('验证码不能为空');\r\n        return;\r\n      }\r\n      Indicator.open('登录中...');\r\n      let that = this\r\n      this.$ajax.get('member/login', {\r\n        params: { openId: that.sessionId, phone: that.phone, smsCode: that.code }\r\n      }).then((res) => {\r\n        console.log(res)\r\n        let data = res.data\r\n        switch (data.code) {\r\n          case '2001':\r\n            Indicator.close();\r\n            Toast(data.msg);\r\n            break;\r\n          case '0000':\r\n            Indicator.close();\r\n            that.refreshToken(that.phone, data.data.refreshToken, that.sessionId);\r\n            break;\r\n        }\r\n      }).catch(err => {\r\n        \r\n      });;\r\n      //this.$router.push({ name: 'myindex'}) // -> /user\r\n    },\r\n    refreshToken(phone, refreshToken, sessionId) {\r\n      this.$ajax.get('member/refreshToken', {\r\n        params: { openId: sessionId, phone: phone, refreshToken: refreshToken }\r\n      }).then((res) => {\r\n\r\n        let data = res.data\r\n        localStorage.setItem('openid', data.data.openId)\r\n        localStorage.setItem('user', JSON.stringify(data.data))\r\n        this.$router.push({ name: 'myindex' }) // -> /user\r\n        // switch(data.code){\r\n        //     case '2001':\r\n        //     Toast(data.msg);\r\n        //     break;\r\n        //     case '0000':\r\n        //     Indicator.close();\r\n        //     that.refreshToken(that.phone,data.data.refreshToken,that.sessionId);\r\n        //     localStorage.setItem('openid',that.sessionId)\r\n        //     that.$router.push({ name: 'myindex'}) // -> /user\r\n        //     break;\r\n        // }\r\n      }).catch(err => {\r\n\r\n      });\r\n    },\r\n    // 判断是否为微信环境\r\n    is_weixin() {\r\n      var ua = navigator.userAgent.toLowerCase();\r\n      if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n        this.isWeixin = true;\r\n      } else {\r\n        // 微信外\r\n        this.isWeixin = false;\r\n      }\r\n    },\r\n    //获取sessionId\r\n    getsessionId() {\r\n      let that = this\r\n      Indicator.open({\r\n        text: '登录初始化...',\r\n        spinnerType: 'fading-circle'\r\n      });\r\n      this.$ajax({\r\n        method: 'get',\r\n        url: '/member/getSessionId',\r\n      }).then((res) => {\r\n        console.log(res, 'sessionId')\r\n        that.sessionId = res.data.data\r\n        // 获取的sessionid\r\n        // localStorage.setItem('sessionId',res.data.data)\r\n        // localStorage.setItem('openid',res.data.data)\r\n        Indicator.close();\r\n      }).catch(err => {\r\n        Indicator.close();\r\n\r\n      });\r\n    },\r\n\r\n    codeClick() {\r\n      let reg = /^1[3|4|5|7|8][0-9]{9}$/; //验证规则\r\n\r\n      if (!this.phone) {\r\n        Toast('手机号码不能为空');\r\n        return;\r\n      }\r\n      if (!reg.test(this.phone)) {\r\n        Toast('手机号码格式错误');\r\n        return;\r\n      }\r\n      if (this.onoff) {\r\n        return;\r\n      }\r\n      this.onoff = true\r\n      let that = this\r\n      this.$ajax({\r\n        method: 'post',\r\n        url: 'captcha/sendSms',\r\n        data: this.$qs.stringify({ openId: that.sessionId, phone: that.phone })\r\n      }).then((res) => {\r\n\r\n        console.log(res, '获取验证码')\r\n        let i = 60\r\n        let timer = setInterval(function () {\r\n          if (i == 1) {\r\n            that.tip = \"获取验证码\"\r\n            that.onoff = false\r\n            clearInterval(timer)\r\n            return;\r\n          }\r\n          that.tip = --i + '秒后重新获取'\r\n        }, 1000)\r\n      });\r\n    },\r\n    // 获取微信的openid\r\n    getopenid() {\r\n      let that = this\r\n      Indicator.open({\r\n        text: '登录初始化...',\r\n        spinnerType: 'fading-circle'\r\n      });\r\n      this.$ajax({\r\n        method: 'post',\r\n        url: 'wx/getOpenId',\r\n        data: this.$qs.stringify({ code: that.yanzhengcode })\r\n      }).then((res) => {\r\n        // that.openId = res.data.data\r\n        localStorage.setItem('wxopenid', res.data.data)\r\n        Indicator.close();\r\n      }).catch(err => {\r\n        Indicator.close();\r\n      });\r\n    },\r\n  },\r\n  created() {\r\n    this.getsessionId()\r\n    var ua = navigator.userAgent.toLowerCase();\r\n      if (ua.match(/MicroMessenger/i) == \"micromessenger\") {\r\n        this.isWeixin = true;\r\n        var reg = new RegExp(\"(^|&)\" + 'code' + \"=([^&]*)(&|$)\");\r\n        var r = window.location.search.substr(1).match(reg);\r\n        this.yanzhengcode = r[2]\r\n        this.getopenid()\r\n      } else {\r\n        // 微信外\r\n        this.isWeixin = false;\r\n      }\r\n      \r\n  },\r\n  mounted() {\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n@import \"../../assets/common.scss\";\r\n.wrap {\r\n  height: 100%;\r\n  background: #f5f5f5;\r\n}\r\n.bottom-btn {\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  width: px2rem(348px);\r\n  background: -moz-linear-gradient( top,#FF8586,#D81618);\r\n  background:  -webkit-linear-gradient( top,#FF8586,#D81618);\r\n  background: -o-linear-gradient( top,#FF8586,#D81618);\r\n  background: linear-gradient( top,#FF8586,#D81618);\r\n  font-size: px2rem(15px);\r\n  color: #fff;\r\n  height: px2rem(40px);\r\n  border-radius: px2rem(8px);\r\n  margin: px2rem(30px) auto 0 auto;\r\n}\r\n.phone {\r\n  height: px2rem(78px);\r\n  font-size: px2rem(17px);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n.btn-code {\r\n  color: #7a7979;\r\n}\r\nfooter {\r\n  margin-top: px2rem(30px);\r\n  width: 100%;\r\n  height: px2rem(15px);\r\n  font-size: px2rem(13px);\r\n  text-align: center;\r\n  font-weight: 500;\r\n  color: #6d6d6d;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/login/index.vue","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../node_modules/_css-loader@0.28.11@css-loader/index.js?minimize!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index.js?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-231fa990\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=styles&index=0!./index.vue\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar update = require(\"!../../../node_modules/_vue-style-loader@3.1.2@vue-style-loader/lib/addStylesClient.js\")(\"16715086\", content, true, {});\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-style-loader@3.1.2@vue-style-loader!./node_modules/_css-loader@0.28.11@css-loader?minimize!./node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-231fa990\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/login/index.vue\n// module id = 278\n// module chunks = 37","exports = module.exports = require(\"../../../node_modules/_css-loader@0.28.11@css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".wrap[data-v-231fa990]{height:100%;background:#f5f5f5}.bottom-btn[data-v-231fa990]{width:9.28rem;background:-moz-linear-gradient(top,#ff8586,#d81618);background:-webkit-linear-gradient(top,#ff8586,#d81618);background:-o-linear-gradient(top,#ff8586,#d81618);background:linear-gradient(top,#ff8586,#d81618);font-size:.4rem;color:#fff;height:1.06667rem;border-radius:.21333rem;margin:.8rem auto 0}.bottom-btn[data-v-231fa990],.phone[data-v-231fa990]{display:flex;justify-content:center;align-items:center}.phone[data-v-231fa990]{height:2.08rem;font-size:.45333rem}.btn-code[data-v-231fa990]{color:#7a7979}footer[data-v-231fa990]{margin-top:.8rem;width:100%;height:.4rem;font-size:.34667rem;text-align:center;font-weight:500;color:#6d6d6d}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_css-loader@0.28.11@css-loader?minimize!./node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler?{\"vue\":true,\"id\":\"data-v-231fa990\",\"scoped\":true,\"hasInlineConfig\":false}!./node_modules/_sass-loader@6.0.7@sass-loader/lib/loader.js!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=styles&index=0!./src/pages/login/index.vue\n// module id = 279\n// module chunks = 37","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"phone\"},[_vm._v(\"手机号登录\")]),_vm._v(\" \"),_c('mt-field',{attrs:{\"label\":\"手机号\",\"type\":\"tel\",\"placeholder\":\"请输入新的手机号\"},model:{value:(_vm.phone),callback:function ($$v) {_vm.phone=$$v},expression:\"phone\"}}),_vm._v(\" \"),_c('mt-field',{staticClass:\"getcode\",attrs:{\"label\":\"验证码\",\"type\":\"number\",\"placeholder\":\"请输入验证码\"},model:{value:(_vm.code),callback:function ($$v) {_vm.code=$$v},expression:\"code\"}},[_c('span',{staticClass:\"btn-code\",on:{\"click\":_vm.codeClick}},[_vm._v(_vm._s(_vm.tip))])]),_vm._v(\" \"),_c('div',{staticClass:\"bottom-btn\",on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-231fa990\",\"hasScoped\":true,\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/index.vue\n// module id = 280\n// module chunks = 37","function injectStyle (ssrContext) {\n  require(\"!!vue-loader/node_modules/vue-style-loader!css-loader?minimize!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-231fa990\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-231fa990\\\",\\\"hasScoped\\\":true,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-231fa990\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/index.vue\n// module id = 93\n// module chunks = 37"],"sourceRoot":""}